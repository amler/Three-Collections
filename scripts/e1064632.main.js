"use strict";var ListView=Backbone.View.extend({template:_.template($(".list-template").text()),userChoiceTemplate:_.template($(".column-choice-template").text()),className:"list-item",events:{"click .select":"selectItem","click .cancel":"render","click .move-right":"moveRight","click .copy-right":"copyRight","click .move-left":"moveLeft","click .copy-left":"copyLeft","click .delete":"destroy"},initialize:function(a){this.listenTo(this.model,"destroy",this.remove),this.listenTo(this.model,"add",this.render),this.listenTo(this.model,"change",this.render),this.$container=a.container,this.$container.append(this.el),this.render()},render:function(){var a=this.template(this.model.attributes);return this.$el.html(a),this},userChoice:function(){var a=this.userChoiceTemplate(this.model.attributes);return this.$el.html(a),this},selectItem:function(){this.userChoice()},moveRight:function(){var a=this.model;this.copyRight(),a.destroy()},copyRight:function(){var a=_.indexOf(listArray,this.model.collection);if(a+1>=listArray.length)var b=listArray[0].add({item:this.model.attributes.item});else var b=listArray[a+1].add({item:this.model.attributes.item});b.save(),this.render()},copyLeft:function(){var a=_.indexOf(listArray,this.model.collection);if(0===a){console.log(a);var b=listArray[listArray.length-1].add({item:this.model.attributes.item})}else var b=listArray[a-1].add({item:this.model.attributes.item});b.save(),this.render()},moveLeft:function(){var a=this.model;this.copyLeft(),a.destroy()},destroy:function(){var a=confirm("Are you sure you want to delete this item?");a===!0&&(this.model.destroy(),this.remove()),this.render()}}),Item=Backbone.Model.extend({idAttribute:"_id",defaults:{item:""}}),ItemCollection=Backbone.Collection.extend({model:Item,initialize:function(a){this.url=a.url,this.id=_.uniqueId("collection-"),this.on("add",function(a){new ListView({model:a,container:$("."+this.id)})})}}),listArray=[new ItemCollection({url:"http://tiny-pizza-server.herokuapp.com/collections/scamler-list1"}),new ItemCollection({url:"http://tiny-pizza-server.herokuapp.com/collections/scamler-list2"}),new ItemCollection({url:"http://tiny-pizza-server.herokuapp.com/collections/scamler-list3"})],count=0;listArray.forEach(function(a){count++;var b=$("<div></div>");b.addClass(a.id+" container"),$(".collections-container").append(b),b.html("<h2> Collection "+count+"</h2>"),a.fetch()});